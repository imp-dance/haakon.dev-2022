---
id: ryfreact-ui
title: rtk-query-loader (npm package)
subTitle: 2022-now
body: A package that lets you create loaders that contain multiple RTK queries.
type: project
---

[rtk-query-loader](https://github.com/ryfylke-react-as/rtk-query-loader#readme) is a package that lets you create reusable and extendable _loaders_ that contain queries from redux toolkit.

Let's say you have a component that depends on data from more than one query. The end result is quite possibly lots of bloated code that has to take into consideration that the values could be undefined, optional chaining, etc...

What if we could instead "join" these queries into one, and then just return early if we are in the initial loading stage. That's basically the approach that rtk-query-loader takes. Some pros include:

- Way less optional chaining in your components
- Better type certainty
- Easy to write re-usable loaders that can be abstracted away from the components

An example:

<code><pre style="padding: 16px;">
import {
createLoader,
withLoader,
} from "@ryfylke-react/rtk-query-loader";

const loader = createLoader({
queries: () => {
const pokemon = useGetPokemon();
const currentUser = useGetCurrentUser();
return [pokemon, currentUser] as const;
},
onLoading: () => &lt;div&gt;Loading pokemon...&lt;/div&gt;,
});

const Component = withLoader((props, data) => {
const pokemon = data[0];
return (
&lt;div&gt;
&lt;h1&gt;{pokemon.name}&lt;/h1&gt;
&lt;p&gt;{pokemon.ability_power}&lt;/p&gt;
&lt;/div&gt;
);
}, loader);

</pre></code>
